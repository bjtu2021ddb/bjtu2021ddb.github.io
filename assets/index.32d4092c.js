var e=Object.defineProperty,t=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,n=Object.prototype.propertyIsEnumerable,r=(t,a,n)=>a in t?e(t,a,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[a]=n;import{r as l,M as o,T as s,O as c,X as i,A as m,V as p,f as u,R as d,a as y,u as f,b as E,F as w,I as b,U as I,S as k,B as g,c as h,d as x,e as O,g as P}from"./vendor.5fefafdb.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const a of e)if("childList"===a.type)for(const e of a.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerpolicy&&(t.referrerPolicy=e.referrerpolicy),"use-credentials"===e.crossorigin?t.credentials="include":"anonymous"===e.crossorigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();const v=[{title:"序号",dataIndex:"no",key:"no"},{title:"车站名称",dataIndex:"station_name",key:"station_name"},{title:"关键点类型",dataIndex:"key_type",key:"key_type"},{title:"名称",dataIndex:"name",key:"name"},{title:"类型",dataIndex:"type",key:"type"},{title:"轨道号",dataIndex:"track_id",key:"track_id"},{title:"位置(厘米)",dataIndex:"position",key:"position"},{title:"里程",dataIndex:"mileage",key:"mileage"},{title:"备注",dataIndex:"remark",key:"remark"}];const C=[{path:"/",exactPath:!0,component:function(){const[e,t]=l.exports.useState([]),a=E(),n=l.exports.useCallback(((e,t)=>{a.push(`/poi/edit/${e.objectId}`)}),[]);return l.exports.useEffect((()=>{new Promise(((e,t)=>{const a=y.Object.extend("POI");new y.Query(a).find().then((t=>{const a=t.map((e=>e.toJSON()));e(a)}),(e=>{t(e)}))})).then((e=>t(e)))}),[]),d.createElement("div",{className:"POIList"},d.createElement(h,{dataSource:e,columns:v,onRow:(e,t)=>({onClick:a=>{n(e,t)}})}))}},{path:"/poi/edit/:objectId",component:function(){const{objectId:e}=f(),t=E(),a=l.exports.useRef(),[n,r]=l.exports.useState([]);l.exports.useEffect((()=>{(e=>new Promise(((t,a)=>{const n=y.Object.extend("POI");new y.Query(n).get(e).then((e=>{const a=e.toJSON();t(a)}),(e=>{a(e)}))})))(e).then((e=>{a.current.setFieldsValue(e)}))}),[]);const o=l.exports.useCallback((()=>{}),[]),s=l.exports.useCallback((()=>{}),[]),c=l.exports.useCallback((()=>{t.goBack()}),[]);return d.createElement(d.Fragment,null,d.createElement("div",{className:"POIEdit"},d.createElement(w,{labelCol:{span:4},wrapperCol:{span:16},name:"poiEdit",onFinish:o,onFinishFailed:s,autoComplete:"off",ref:a},d.createElement(w.Item,{name:"station_name",label:"车站名称"},d.createElement(b,null)),d.createElement(w.Item,{name:"key_type",label:"关键点类型"},d.createElement(b,null)),d.createElement(w.Item,{name:"name",label:"名称"},d.createElement(b,null)),d.createElement(w.Item,{name:"type",label:"类型"},d.createElement(b,null)),d.createElement(w.Item,{name:"track_id",label:"轨道号"},d.createElement(b,null)),d.createElement(w.Item,{name:"position",label:"位置(厘米)"},d.createElement(b,null)),d.createElement(w.Item,{name:"mileage",label:"里程"},d.createElement(b,null)),d.createElement(w.Item,{name:"remark",label:"备注"},d.createElement(b.TextArea,null)),d.createElement(w.Item,{wrapperCol:{offset:4,span:16}},d.createElement(I,{action:"https://www.mocky.io/v2/5cc8019d300000980a055e76",listType:"picture-card",fileList:n,onChange:({fileList:e})=>{r(e)},onPreview:async e=>{await(async e=>{let t=e.url;t||(t=await new Promise((t=>{const a=new FileReader;a.readAsDataURL(e.originFileObj),a.onload=()=>t(a.result)})));const a=new Image;a.src=t,window.open(t).document.write(a.outerHTML)})(e)}},"上传图片")),d.createElement(w.Item,{wrapperCol:{offset:4,span:16}},d.createElement(k,null,d.createElement(g,{type:"primary",htmlType:"submit"},"保存"),d.createElement(g,{htmlType:"button",onClick:c},"返回"))))))}},{path:"/poi/editor",component:function(){const e=l.exports.useRef();return l.exports.useEffect((()=>{e.current=new o({target:"map",layers:[new s({source:new c}),new s({source:new i({attributions:[c.ATTRIBUTION,new m({html:'Style: <a href="http://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA 2.0</a> <a href="http://www.openrailwaymap.org/">OpenRailwayMap</a> and OpenStreetMap'})],url:"http://{a-c}.tiles.openrailwaymap.org/standard/{z}/{x}/{y}.png",crossOrigin:null,tilePixelRatio:2,maxZoom:19,opaque:!0})})],view:new p({center:u([37.41,8.82]),zoom:4})})}),[]),d.createElement("div",{id:"map",className:"POIEditor"})}}];function S(){return d.createElement(x,null,C.map((e=>d.createElement(O,((e,l)=>{for(var o in l||(l={}))a.call(l,o)&&r(e,o,l[o]);if(t)for(var o of t(l))n.call(l,o)&&r(e,o,l[o]);return e})({key:e.path},e)))))}y.init({appId:"73rQc9RCXmXDgXg2fD2pPrkS-gzGzoHsz",appKey:"FT6wlcV9U6XUNHRinau5pXa8",serverURL:"https://73rqc9rc.lc-cn-n1-shared.com"}),P.render(d.createElement(d.StrictMode,null,d.createElement(S,null)),document.getElementById("root"));
