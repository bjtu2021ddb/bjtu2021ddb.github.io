(this["webpackJsonpbjtu-fe-assets"]=this["webpackJsonpbjtu-fe-assets"]||[]).push([[0],{148:function(e,t){},206:function(e,t,n){},243:function(e,t,n){},247:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),i=n(20),r=n.n(i),o=n(30),s=n(25),l=n.n(s),j=n(10),b=(n(206),n(4)),u=n(6),d=n(13),h=n(7),p=n(8),O=n(3),m=n(248),f=n(2),x=function(e){Object(h.a)(n,e);var t=Object(p.a)(n);function n(){return Object(b.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){var e=this.props.upload;return Object(f.jsx)("div",{style:{fontSize:18},children:Object(f.jsx)(m.a,{onClick:e})})}}]),n}(c.a.Component),v=(n(243),function(e){Object(h.a)(n,e);var t=Object(p.a)(n);function n(){return Object(b.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){var e=this.props.visible;return Object(f.jsx)(O.g,{visible:e,children:Object(f.jsxs)("div",{className:"content",children:["\u52a0\u8f7d\u4e2d",Object(f.jsx)(O.f,{})]})})}}]),n}(c.a.Component));function y(e){return e||"-"}var k=function(e){Object(h.a)(n,e);var t=Object(p.a)(n);function n(e){var a;return Object(b.a)(this,n),(a=t.call(this,e)).state={data:[],loading:!1},a.uploadData=a.uploadData.bind(Object(d.a)(a)),a.refreshList=a.refreshList.bind(Object(d.a)(a)),a.itemClick=a.itemClick.bind(Object(d.a)(a)),a}return Object(u.a)(n,[{key:"componentDidMount",value:function(){this.refreshList()}},{key:"uploadData",value:function(){this.setState({loading:!0})}},{key:"itemClick",value:function(e){this.props.history.push("/task/".concat(e.objectId))}},{key:"refreshList",value:function(){var e=this;new l.a.Query("KeyPoint").find().then((function(t){var n=t.map((function(e){return e.toFullJSON()}));e.setState({data:n})}))}},{key:"render",value:function(){var e=this,t=this.props.title,n=this.state,a=n.data,c=n.loading;return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(O.h,{className:"nav-bar",backArrow:!1,right:Object(f.jsx)(x,{upload:this.uploadData}),children:t}),Object(f.jsx)(O.i,{onRefresh:this.refreshList,children:a.length>0?Object(f.jsx)(O.e,{children:a.map((function(t){return Object(f.jsx)(O.e.Item,{onClick:function(n){return e.itemClick(t)},prefix:t.key_index,title:"\u540d\u79f0: ".concat(y(t.name)," (").concat(y(t.remark),")"),extra:"".concat(y(t.key_point_type)),description:"\u8f66\u7ad9: ".concat(y(t.station_name)," \u4f4d\u7f6e: ").concat(y(t.position),"CM"),clickable:!0,children:"\u91cc\u7a0b: ".concat(t.mile)},t.objectId)}))}):Object(f.jsx)(O.a,{style:{padding:"128px 0"},imageStyle:{width:128},description:"\u6682\u65e0\u6570\u636e"})}),Object(f.jsx)(v,{visible:c})]})}}]),n}(c.a.Component),g=Object(j.e)(k),C=n(249),I=n(250),F=n(251),L=n(252),D=n(253),w=[{key:"home",title:"\u9996\u9875",icon:Object(f.jsx)(C.a,{})},{key:"todo",title:"\u6211\u7684\u5f85\u529e",icon:Object(f.jsx)(I.a,{})},{key:"message",title:"\u6211\u7684\u6d88\u606f",icon:function(e){return e?Object(f.jsx)(F.a,{}):Object(f.jsx)(L.a,{})}},{key:"personalCenter",title:"\u4e2a\u4eba\u4e2d\u5fc3",icon:Object(f.jsx)(D.a,{})}],R=function(e){Object(h.a)(n,e);var t=Object(p.a)(n);function n(e){var a;return Object(b.a)(this,n),(a=t.call(this,e)).state={activeKey:"todo"},a.tabChange=a.tabChange.bind(Object(d.a)(a)),a.renderContent=a.renderContent.bind(Object(d.a)(a)),a}return Object(u.a)(n,[{key:"tabChange",value:function(e){this.setState({activeKey:e})}},{key:"renderContent",value:function(){var e=this.state.activeKey,t=w.find((function(t){return t.key===e})).title;return"todo"===e?Object(f.jsx)(g,{title:t}):null}},{key:"render",value:function(){var e=this.state.activeKey;return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("div",{className:"tab-content",children:this.renderContent()}),Object(f.jsx)(O.j,{className:"tab-bar",activeKey:e,onChange:this.tabChange,children:w.map((function(e){return Object(f.jsx)(O.j.Item,{icon:e.icon,title:e.title},e.key)}))})]})}}]),n}(c.a.Component),S=function(e){Object(h.a)(n,e);var t=Object(p.a)(n);function n(e){var a;return Object(b.a)(this,n),(a=t.call(this,e)).state={fileList:[],loading:!1},a.formRef=c.a.createRef(),a.back=a.back.bind(Object(d.a)(a)),a.changeFileList=a.changeFileList.bind(Object(d.a)(a)),a.uploadFile=a.uploadFile.bind(Object(d.a)(a)),a.uploadData=a.uploadData.bind(Object(d.a)(a)),a}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params.objectId,n=new l.a.Query("KeyPoint");n.equalTo("objectId",t),n.find().then((function(t){var n,a=t.map((function(e){return e.toFullJSON()}));console.log(a[0]),null===(n=e.formRef.current)||void 0===n||n.setFieldsValue(a[0])}))}},{key:"back",value:function(){this.props.history.go(-1)}},{key:"uploadData",value:function(){this.setState({loading:!0})}},{key:"changeFileList",value:function(e){console.log(e)}},{key:"uploadFile",value:function(e){var t=new FileReader;return t.readAsDataURL(e),new Promise((function(e,n){t.onload=function(t){console.log(t.target.result),e({url:t.target.result})}}))}},{key:"render",value:function(){var e=this.state,t=e.loading,n=e.fileList;return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(O.h,{className:"nav-bar",onBack:this.back,right:Object(f.jsx)(x,{upload:this.uploadData}),children:"\u4fee\u6539\u5173\u952e\u70b9"}),Object(f.jsxs)(O.b,{ref:this.formRef,layout:"horizontal",style:{marginTop:"45px"},children:[Object(f.jsx)(O.b.Item,{name:"station_name",label:"\u8f66\u7ad9",children:Object(f.jsx)(O.d,{placeholder:"\u8bf7\u8f93\u5165\u8f66\u7ad9"})}),Object(f.jsx)(O.b.Item,{name:"key_point_type",label:"\u5173\u952e\u70b9",children:Object(f.jsx)(O.d,{placeholder:"\u8bf7\u8f93\u5165\u5173\u952e\u70b9"})}),Object(f.jsx)(O.b.Item,{name:"name",label:"\u540d\u79f0",children:Object(f.jsx)(O.d,{placeholder:"\u8bf7\u8f93\u5165\u540d\u79f0"})}),Object(f.jsx)(O.b.Item,{name:"type",label:"\u7c7b\u578b",children:Object(f.jsx)(O.d,{placeholder:"\u8bf7\u8f93\u5165\u7c7b\u578b"})}),Object(f.jsx)(O.b.Item,{name:"track_index",label:"\u8f68\u9053\u53f7",children:Object(f.jsx)(O.d,{type:"number",placeholder:"\u8bf7\u8f93\u5165\u8f68\u9053\u53f7"})}),Object(f.jsx)(O.b.Item,{name:"position",label:"\u4f4d\u7f6e",children:Object(f.jsx)(O.d,{type:"number",placeholder:"\u8bf7\u8f93\u5165\u4f4d\u7f6e(\u5398\u7c73)"})}),Object(f.jsx)(O.b.Item,{name:"mile",label:"\u91cc\u7a0b",children:Object(f.jsx)(O.d,{placeholder:"\u8bf7\u8f93\u5165\u91cc\u7a0b"})}),Object(f.jsx)(O.b.Item,{name:"remark",label:"\u5907\u6ce8",children:Object(f.jsx)(O.k,{autoSize:{minRows:3,maxRows:5},placeholder:"\u8bf7\u8f93\u5165\u5907\u6ce8"})}),Object(f.jsx)(O.b.Item,{name:"images",label:"\u56fe\u7247",children:Object(f.jsx)(O.c,{value:n,onChange:this.changeFileList,upload:this.uploadFile})})]}),Object(f.jsx)(v,{visible:t})]})}}]),n}(c.a.Component),K=[{key:"Home",path:"/",component:R,exact:!0},{key:"TaskEdit",path:"/task/:objectId",component:Object(j.e)(S)}];l.a.init({appId:"D2Lp5opsBuU0pViwGNsM9I88-gzGzoHsz",appKey:"sTjoMU6UUPTSV127KrTJcC0Q",serverURL:"https://d2lp5ops.lc-cn-n1-shared.com"});var N=function(){return Object(f.jsx)(f.Fragment,{children:K.map((function(e){return Object(f.jsx)(j.a,{path:e.path,component:e.component,exact:e.exact},e.key)}))})};r.a.render(Object(f.jsx)(o.a,{children:Object(f.jsx)(N,{})}),document.getElementById("root"))},36:function(e,t){}},[[247,1,2]]]);
//# sourceMappingURL=main.dd3d9629.chunk.js.map