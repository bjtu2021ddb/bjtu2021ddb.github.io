{"version":3,"sources":["pages/Home/components/TaskList/index.jsx","pages/Home/components/UploadButton/index.jsx","pages/Home/consts.jsx","pages/Home/index.jsx","App.js","index.js"],"names":["TaskList","this","props","data","refreshList","onRefresh","length","map","item","Item","prefix","key_index","title","name","remark","extra","key_point_type","description","station_name","position","clickable","mile","objectId","style","padding","imageStyle","width","React","Component","UploadButton","upload","fontSize","RedoOutline","onClick","tabs","key","icon","AppOutline","UnorderedListOutline","active","MessageFill","MessageOutline","UserOutline","Home","state","activeKey","functionBind","AV","Query","find","then","result","value","toFullJSON","setState","bind","tabChange","renderTitle","renderRightButton","renderContent","t","current","i","unshift","toString","className","backArrow","right","onChange","init","appId","appKey","serverURL","App","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.e9ebc750.chunk.js","sourcesContent":["import { Empty, List, PullToRefresh } from 'antd-mobile';\nimport React from 'react';\nimport './index.css';\n\nclass TaskList extends React.Component {\n  render() {\n    const { data, refreshList } = this.props;\n\n    return (\n      <>\n        <PullToRefresh onRefresh={refreshList}>\n          {data.length > 0 ? (\n            <List>\n              {data.map((item) => (\n                <List.Item\n                  key={item.objectId}\n                  prefix={item.key_index}\n                  title={`名称: ${item.name} (${item.remark})`}\n                  extra={`关键点类型: ${item.key_point_type}`}\n                  description={`车站名称: ${item.station_name} 位置: ${item.position}CM`}\n                  clickable\n                >\n                  {`里程: ${item.mile}`}\n                </List.Item>\n              ))}\n            </List>\n          ) : (\n            <Empty\n              style={{ padding: '128px 0' }}\n              imageStyle={{ width: 128 }}\n              description=\"暂无数据\"\n            />\n          )}\n        </PullToRefresh>\n      </>\n    );\n  }\n}\n\nexport default TaskList;\n","import { RedoOutline } from 'antd-mobile-icons';\nimport React from 'react';\n\nclass UploadButton extends React.Component {\n  render() {\n    const { upload } = this.props;\n    return (\n      <div style={{ fontSize: 18 }}>\n        <RedoOutline onClick={upload} />\n      </div>\n    );\n  }\n}\n\nexport default UploadButton;\n","import {\n  AppOutline,\n  MessageFill,\n  MessageOutline,\n  UnorderedListOutline,\n  UserOutline,\n} from 'antd-mobile-icons';\n\nexport const tabs = [\n  {\n    key: 'home',\n    title: '首页',\n    icon: <AppOutline />,\n  },\n  {\n    key: 'todo',\n    title: '我的待办',\n    icon: <UnorderedListOutline />,\n  },\n  {\n    key: 'message',\n    title: '我的消息',\n    icon: (active) => (active ? <MessageFill /> : <MessageOutline />),\n  },\n  {\n    key: 'personalCenter',\n    title: '个人中心',\n    icon: <UserOutline />,\n  },\n];\n","import { NavBar, TabBar } from 'antd-mobile';\nimport AV from 'leancloud-storage/live-query';\nimport React from 'react';\nimport { TaskList, UploadButton } from './components';\nimport { tabs } from './consts';\nimport './index.css';\n\nclass Home extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      data: [],\n      activeKey: 'todo',\n    };\n\n    this.functionBind();\n  }\n\n  componentDidMount() {\n    const query = new AV.Query('KeyPoint');\n    query.find().then((result) => {\n      const data = result.map((value) => value.toFullJSON());\n      this.setState({ data });\n    });\n  }\n\n  functionBind() {\n    this.refreshList = this.refreshList.bind(this);\n    this.tabChange = this.tabChange.bind(this);\n    this.upload = this.upload.bind(this);\n    this.renderTitle = this.renderTitle.bind(this);\n    this.renderRightButton = this.renderRightButton.bind(this);\n    this.renderContent = this.renderContent.bind(this);\n  }\n\n  tabChange(key) {\n    this.setState({ activeKey: key });\n  }\n\n  renderTitle() {\n    const { activeKey } = this.state;\n\n    return tabs.find((t) => t.key === activeKey).title;\n  }\n\n  renderRightButton() {\n    const { activeKey } = this.state;\n    return activeKey === 'todo' ? (\n      <UploadButton upload={this.upload} />\n    ) : null;\n  }\n\n  renderContent() {\n    const { data, activeKey } = this.state;\n    return activeKey === 'todo' ? (\n      <TaskList data={data} refreshList={this.refreshList} />\n    ) : null;\n  }\n\n  /**\n   * 刷新数据\n   */\n  refreshList() {\n    const { data } = this.state;\n\n    let current = 1;\n    for (let i = 0; i < 18; i++) {\n      data.unshift(current.toString());\n      current++;\n    }\n\n    this.setState({ data: [...data] });\n  }\n\n  /**\n   * 上传同步数据\n   */\n  upload() {\n    this.setState({ data: [] });\n  }\n\n  render() {\n    const { activeKey } = this.state;\n\n    return (\n      <>\n        <NavBar\n          className=\"nav-bar\"\n          backArrow={false}\n          right={this.renderRightButton()}\n        >\n          {this.renderTitle()}\n        </NavBar>\n\n        <div className=\"content\">{this.renderContent()}</div>\n\n        <TabBar\n          className=\"tab-bar\"\n          activeKey={activeKey}\n          onChange={this.tabChange}\n        >\n          {tabs.map((item) => (\n            <TabBar.Item\n              key={item.key}\n              icon={item.icon}\n              title={item.title}\n            />\n          ))}\n        </TabBar>\n      </>\n    );\n  }\n}\n\nexport default Home;\n","import AV from 'leancloud-storage/live-query';\nimport './App.css';\nimport Home from './pages/Home';\nAV.init({\n  appId: 'D2Lp5opsBuU0pViwGNsM9I88-gzGzoHsz',\n  appKey: 'sTjoMU6UUPTSV127KrTJcC0Q',\n  serverURL: 'https://d2lp5ops.lc-cn-n1-shared.com',\n});\n\nfunction App() {\n  return (\n    <div className=\"App\">\n      <Home />\n    </div>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}