{"version":3,"sources":["pages/Home/utils.js","pages/Home/components/TaskList/index.jsx","pages/Home/components/UploadButton/index.jsx","pages/Home/consts.jsx","pages/Home/index.jsx","App.js","index.js"],"names":["showText","text","TaskList","this","props","data","refreshList","onRefresh","length","map","item","Item","prefix","key_index","title","name","remark","extra","key_point_type","description","station_name","position","clickable","mile","objectId","style","padding","imageStyle","width","React","Component","UploadButton","upload","fontSize","RedoOutline","onClick","tabs","key","icon","AppOutline","UnorderedListOutline","active","MessageFill","MessageOutline","UserOutline","Home","state","activeKey","functionBind","bind","tabChange","renderTitle","renderRightButton","renderContent","setState","find","t","AV","Query","then","result","value","toFullJSON","className","backArrow","right","onChange","init","appId","appKey","serverURL","App","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.05b0e1a7.chunk.js","sourcesContent":["export function showText(text) {\n  return text || '-';\n}\n","import { Empty, List, PullToRefresh } from 'antd-mobile';\nimport { showText } from '../../utils';\nimport React from 'react';\nimport './index.css';\n\nclass TaskList extends React.Component {\n  render() {\n    const { data, refreshList } = this.props;\n\n    return (\n      <>\n        <PullToRefresh onRefresh={refreshList}>\n          {data.length > 0 ? (\n            <List>\n              {data.map((item) => (\n                <List.Item\n                  key={item.objectId}\n                  prefix={item.key_index}\n                  title={`名称: ${showText(item.name)} (${showText(\n                    item.remark,\n                  )})`}\n                  extra={`关键点类型: ${showText(\n                    item.key_point_type,\n                  )}`}\n                  description={`车站名称: ${showText(\n                    item.station_name,\n                  )} 位置: ${showText(item.position)}CM`}\n                  clickable\n                >\n                  {`里程: ${item.mile}`}\n                </List.Item>\n              ))}\n            </List>\n          ) : (\n            <Empty\n              style={{ padding: '128px 0' }}\n              imageStyle={{ width: 128 }}\n              description=\"暂无数据\"\n            />\n          )}\n        </PullToRefresh>\n      </>\n    );\n  }\n}\n\nexport default TaskList;\n","import { RedoOutline } from 'antd-mobile-icons';\nimport React from 'react';\n\nclass UploadButton extends React.Component {\n  render() {\n    const { upload } = this.props;\n    return (\n      <div style={{ fontSize: 18 }}>\n        <RedoOutline onClick={upload} />\n      </div>\n    );\n  }\n}\n\nexport default UploadButton;\n","import {\n  AppOutline,\n  MessageFill,\n  MessageOutline,\n  UnorderedListOutline,\n  UserOutline,\n} from 'antd-mobile-icons';\n\nexport const tabs = [\n  {\n    key: 'home',\n    title: '首页',\n    icon: <AppOutline />,\n  },\n  {\n    key: 'todo',\n    title: '我的待办',\n    icon: <UnorderedListOutline />,\n  },\n  {\n    key: 'message',\n    title: '我的消息',\n    icon: (active) => (active ? <MessageFill /> : <MessageOutline />),\n  },\n  {\n    key: 'personalCenter',\n    title: '个人中心',\n    icon: <UserOutline />,\n  },\n];\n","import { NavBar, TabBar } from 'antd-mobile';\nimport AV from 'leancloud-storage/live-query';\nimport React from 'react';\nimport { TaskList, UploadButton } from './components';\nimport { tabs } from './consts';\nimport './index.css';\n\nclass Home extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      data: [],\n      activeKey: 'todo',\n    };\n\n    this.functionBind();\n  }\n\n  componentDidMount() {\n    this.refreshList();\n  }\n\n  functionBind() {\n    this.refreshList = this.refreshList.bind(this);\n    this.tabChange = this.tabChange.bind(this);\n    this.upload = this.upload.bind(this);\n    this.renderTitle = this.renderTitle.bind(this);\n    this.renderRightButton = this.renderRightButton.bind(this);\n    this.renderContent = this.renderContent.bind(this);\n  }\n\n  tabChange(key) {\n    this.setState({ activeKey: key });\n  }\n\n  renderTitle() {\n    const { activeKey } = this.state;\n\n    return tabs.find((t) => t.key === activeKey).title;\n  }\n\n  renderRightButton() {\n    const { activeKey } = this.state;\n    return activeKey === 'todo' ? (\n      <UploadButton upload={this.upload} />\n    ) : null;\n  }\n\n  renderContent() {\n    const { data, activeKey } = this.state;\n    return activeKey === 'todo' ? (\n      <TaskList data={data} refreshList={this.refreshList} />\n    ) : null;\n  }\n\n  /**\n   * 刷新数据\n   */\n  refreshList() {\n    const query = new AV.Query('KeyPoint');\n    query.find().then((result) => {\n      const data = result.map((value) => value.toFullJSON());\n      this.setState({ data });\n    });\n  }\n\n  /**\n   * 上传同步数据\n   */\n  upload() {\n    this.setState({ data: [] });\n  }\n\n  render() {\n    const { activeKey } = this.state;\n\n    return (\n      <>\n        <NavBar\n          className=\"nav-bar\"\n          backArrow={false}\n          right={this.renderRightButton()}\n        >\n          {this.renderTitle()}\n        </NavBar>\n\n        <div className=\"content\">{this.renderContent()}</div>\n\n        <TabBar\n          className=\"tab-bar\"\n          activeKey={activeKey}\n          onChange={this.tabChange}\n        >\n          {tabs.map((item) => (\n            <TabBar.Item\n              key={item.key}\n              icon={item.icon}\n              title={item.title}\n            />\n          ))}\n        </TabBar>\n      </>\n    );\n  }\n}\n\nexport default Home;\n","import AV from 'leancloud-storage/live-query';\nimport './App.css';\nimport Home from './pages/Home';\nAV.init({\n  appId: 'D2Lp5opsBuU0pViwGNsM9I88-gzGzoHsz',\n  appKey: 'sTjoMU6UUPTSV127KrTJcC0Q',\n  serverURL: 'https://d2lp5ops.lc-cn-n1-shared.com',\n});\n\nfunction App() {\n  return (\n    <div className=\"App\">\n      <Home />\n    </div>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}